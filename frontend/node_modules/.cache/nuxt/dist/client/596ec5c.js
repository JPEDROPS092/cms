(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{557:function(e,t,r){"use strict";r.r(t);var n=r(224),o=r(455),c=r(450),l=r(464),d=r(556),v=r(552),h=r(205),f=r(553),m=r(445),_=r(480),k=(r(28),r(213),r(31)),x=(r(9),r(5),r(112),{data:function(){return{search:"",posts:[],loading:!0,headers:[{text:"ID",value:"id",width:"5%"},{text:"Título",value:"title",width:"35%"},{text:"Status",value:"published",width:"10%"},{text:"Data de Criação",value:"created_at",width:"20%"},{text:"Ações",value:"actions",sortable:!1,width:"15%"}],deleteDialog:!1,selectedPost:null,snackbar:!1,snackbarText:"",snackbarColor:"success"}},fetch:function(){var e=this;return Object(k.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchPosts();case 2:case"end":return t.stop()}}),t)})))()},methods:{fetchPosts:function(){var e=this;return Object(k.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.$axios.$get("/posts");case 4:e.posts=t.sent,t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),console.error("Erro ao buscar posts:",t.t0),e.showSnackbar("Erro ao carregar posts","error");case 11:return t.prev=11,e.loading=!1,t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,7,11,14]])})))()},formatDate:function(e){return new Date(e).toLocaleDateString("pt-BR")},confirmDelete:function(e){this.selectedPost=e,this.deleteDialog=!0},deletePost:function(){var e=this;return Object(k.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$delete("/posts/".concat(e.selectedPost.id));case 3:e.showSnackbar("Post excluído com sucesso","success"),e.posts=e.posts.filter((function(t){return t.id!==e.selectedPost.id})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Erro ao excluir post:",t.t0),e.showSnackbar("Erro ao excluir post","error");case 11:return t.prev=11,e.deleteDialog=!1,e.selectedPost=null,t.finish(11);case 15:case"end":return t.stop()}}),t,null,[[0,7,11,15]])})))()},showSnackbar:function(text){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";this.snackbarText=text,this.snackbarColor=e,this.snackbar=!0}}}),w=x,D=r(95),component=Object(D.a)(w,(function(){var e=this,t=e._self._c;return t("div",[t(o.a,[t(c.d,[e._v("\n      Todos os Posts\n      "),t(m.a),e._v(" "),t(_.a,{attrs:{"append-icon":"mdi-magnify",label:"Pesquisar","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),t(d.a,{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.posts,search:e.search,loading:e.loading,"loading-text":"Carregando... Aguarde","no-data-text":"Nenhum post encontrado"},scopedSlots:e._u([{key:"item.published",fn:function(r){var n=r.item;return[t(l.a,{attrs:{color:n.published?"success":"grey",small:""}},[e._v("\n          "+e._s(n.published?"Publicado":"Rascunho")+"\n        ")])]}},{key:"item.created_at",fn:function(t){var r=t.item;return[e._v("\n        "+e._s(e.formatDate(r.created_at))+"\n      ")]}},{key:"item.actions",fn:function(r){var o=r.item;return[t(n.a,{staticClass:"mr-2",attrs:{small:"",icon:"",color:"primary",to:"/posts/".concat(o.id)}},[t(h.a,{attrs:{small:""}},[e._v("mdi-eye")])],1),e._v(" "),t(n.a,{staticClass:"mr-2",attrs:{small:"",icon:"",color:"warning",to:"/posts/".concat(o.id,"/edit")}},[t(h.a,{attrs:{small:""}},[e._v("mdi-pencil")])],1),e._v(" "),t(n.a,{attrs:{small:"",icon:"",color:"error"},on:{click:function(t){return e.confirmDelete(o)}}},[t(h.a,{attrs:{small:""}},[e._v("mdi-delete")])],1)]}}])})],1),e._v(" "),t(n.a,{staticClass:"mb-10",attrs:{color:"primary",fab:"",fixed:"",bottom:"",right:"",to:"/posts/new"}},[t(h.a,[e._v("mdi-plus")])],1),e._v(" "),t(v.a,{attrs:{"max-width":"500"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[t(o.a,[t(c.d,{staticClass:"headline"},[e._v("\n        Confirmar exclusão\n      ")]),e._v(" "),t(c.c,[e._v('\n        Tem certeza que deseja excluir o post "'+e._s(e.selectedPost?e.selectedPost.title:"")+'"? Esta ação não pode ser desfeita.\n      ')]),e._v(" "),t(c.a,[t(m.a),e._v(" "),t(n.a,{attrs:{color:"primary",text:""},on:{click:function(t){e.deleteDialog=!1}}},[e._v("\n          Cancelar\n        ")]),e._v(" "),t(n.a,{attrs:{color:"error"},on:{click:e.deletePost}},[e._v("\n          Excluir\n        ")])],1)],1)],1),e._v(" "),t(f.a,{attrs:{color:e.snackbarColor,timeout:3e3},scopedSlots:e._u([{key:"action",fn:function(r){var o=r.attrs;return[t(n.a,e._b({attrs:{text:""},on:{click:function(t){e.snackbar=!1}}},"v-btn",o,!1),[e._v("\n        Fechar\n      ")])]}}]),model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n    "+e._s(e.snackbarText)+"\n    ")])],1)}),[],!1,null,null,null);t.default=component.exports}}]);